<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Holo - Minimalistic Configuration Management</title>
    <link rel="stylesheet" type="text/css" href="./site.css">
    <link rel="stylesheet" type="text/css" href="./font/font-awesome.min.css">
    
</head>
<body>
    <header>
        <div id="header-container">
            <div id="header-icon" class="fixed-width">
                <a href="index.html"><img src="img/holo-logo.svg" alt="Holo"></a>
            </div>
            <div id="header-buttons" class="fixed-width">
                <a href="https://twitter.com/holocm" title="Follow on Twitter"><i class="fa fa-twitter"></i></a>
                <a href="https://github.com/majewsky/holo" title="Fork on GitHub"><i class="fa fa-github"></i></a>
            </div>
        </div>
    </header>
    <section><div class="fixed-width clearfix"><h1 id="PKGBUILD-for-configure-bashdocserver-second-try">PKGBUILD for configure-bashdocserver (second try)</h1>

<p>Only three small changes from last time: The <code>nginx.conf</code> is installed to Holo&#39;s configuration repository, and we added the dependency on Holo and an <code>.install</code> file with the post-install/upgrade/remove routines (see below).</p>

<pre><code>pkgname=&#39;configure-bashdocserver&#39;
pkgdesc=&#39;Configuration package for a bashdoc webserver&#39;
pkgver=&#39;1.0.0&#39;
pkgrel=1
arch=any
depends=(
    &#39;nginx&#39;
    &#39;holo&#39;
)
sources=(
    &#39;nginx.conf&#39;
)
install=&#39;configure-bashdocserver.install&#39;

package() {
    mkdir -p &quot;${pkgdir}/etc/systemd/system/multi-user.target.wants/&quot;
    ln -sf /usr/lib/systemd/system/nginx.service \
        &quot;${pkgdir}/etc/systemd/system/multi-user.target.wants/nginx.service&quot;

    install -D -m 0644 nginx.conf \
        &quot;${pkgdir}/holo/repo/10-bashdocserver/etc/nginx/nginx.conf&quot;
}</code></pre>

</div></section><section><div class="fixed-width clearfix"><h1 id="configure-bashdocserver.install">configure-bashdocserver.install</h1>

<pre><code>post_install() {
    holo apply
}
post_upgrade() {
    holo apply
}
post_remove() {
    holo apply
}</code></pre>

</div></section><section><div class="fixed-width clearfix"><h1 id="nginx.conf">nginx.conf</h1>

<p>Same as in the last example.</p>

<pre><code>user http;
worker_processes 1;
events {
    worker_connections 1024;
}

http {
    include mime.types;
    default_type application/octet-stream;

    sendfile on;
    keepalive_timeout 65;

    server {
        listen      80;
        server_name bashdoc.local;

        location / {
            root  /usr/share/doc/bash;
            index bash.html;
        }

        error_page 500 502 503 504  /nginx_50x.html;
        location = /nginx_50x.html {
            root /etc/nginx/pages;
        }
    }
}</code></pre></div></section>
    <footer>
        <div class="fixed-width clearfix">
            <p>
                This website is made with <a href="http://montserrat.zkysky.com.ar/en">Montserrat</a>
                and <a href="http://fontawesome.io">FontAwesome</a>
                and <a href="https://github.com/majewsky/majewsky.github.io">maintained at GitHub</a>.
            </p>
        </div>
    </footer>
</body>
</html>
